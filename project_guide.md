# [PRD] nuucard: 가장 따뜻한 편지 (MVP)

## 버전 기록 (Version History)
- **v1.0 (Deprecated)**: URL 기반 저장. 편지 내용이 URL 파라미터에 인코딩됨.
- **v2.0 (Current)**: Supabase + 클라이언트 측 암호화. 서버는 절대 키를 알 수 없는 "비밀 편지" 아키텍처.

## 1. 프로젝트 개요 (Project Overview)
### 1.1. 서비스 정의
**nuucard**는 디지털 코드(Code)로 가장 따뜻한 아날로그 편지의 물성(Texture)을 전하는 디지로그(Digi-log) 편지 서비스입니다. 사용자는 무료로 디지털 편지를 보내고, 수신자는 감동의 순간을 실물 엽서로 소장(구매)할 수 있습니다.

### 1.2. 핵심 가치 제안 (Core Value Proposition)
*   **Off-record (프라이버시)**: 클라이언트 측 암호화를 통해 완벽한 비밀 보장. 개발자조차 편지 내용을 볼 수 없습니다.
*   **Cinematic Experience (영화적 경험)**: 단순한 텍스트 전송이 아닌, 영화 속 한 장면(봉인된 봉투 개봉)을 체험하는 인터랙션.
*   **Physical Connection (물성 연결)**: 디지털 경험을 실물 엽서(굿즈) 구매로 연결하는 O2O 구조.

### 1.3. 타겟 오디언스
*   **주 타겟**: 2030 여성 (감성, 노스탤지어, 관계 지향적).
*   **니즈**: 연말이나 특별한 날, 가벼운 카톡 대신 진정성 있는 마음을 전하고 싶은 욕구.

## 2. 브랜드 아이덴티티 (Brand Identity)
### 2.1. 컨셉
*   **이름**: nuucard (Symmetry of Time & Gaze)
*   **무드**: "나 홀로 집에 (Home Alone)" 바이브. 따뜻한 오두막, 벽난로, 포근한 니트의 서양적 겨울 판타지.
*   **키 오브젝트**: 빨간 뜯는 선(Red Tear-strip)이 있는 하얀색 서류 봉투.

### 2.2. 디자인 언어
*   **컬러**:
    *   **배경**: Warm Ivory (#F9F6F0) - 따뜻한 종이 질감.
    *   **텍스트**: Charcoal Brown (#3E3A36) - 부드러운 잉크색.
    *   **강조**: Vintage Red (#C43E38) - 크리스마스, 뜯는 선, 봉인.
    *   **서브**: Dark Gray (#5A5A5A), White (#FFFFFF).
*   **타이포그래피**:
    *   **헤드라인 (감성)**: 리디바탕 또는 이롭게바탕체 (서정적 명조).
    *   **UI/코드 (정보)**: Pretendard.
*   **사운드 (Audio UX)**:
    *   **타이핑**: 타자기 소리 (tak-tak).
    *   **봉인**: 왁스 실링/도장 소리 (thump).
    *   **개봉**: 지퍼 뜯는 소리 (ziiip) + 바스락거림 (rustle).

## 3. 사용자 흐름 및 기능 (업데이트된 전략)
### 3.1. 보내는 사람 (작성)
1.  **랜딩**: 시네마틱 인트로. "올해, 당신의 겨울은 누구와 닮아있나요?"
2.  **에디터**:
    *   심플한 텍스트 입력창 (타자기 소리).
    *   사진 선택 (배경).
3.  **프로세스 (암호화 및 저장)**:
    *   **클라이언트**: 랜덤 `Key` 생성.
    *   **클라이언트**: `Key`를 사용하여 편지 내용 암호화 (AES-256).
    *   **클라이언트**: **암호문(Ciphertext)**만 Supabase에 전송.
    *   **서버 (Supabase)**: 암호문을 저장하고 고유 `ID` 반환.
    *   **클라이언트**: 공유 링크 생성: `domain.com/view/[id]#[Key]`.
    *   *주의: Key는 절대 서버로 전송되지 않습니다.*
4.  **공유**:
    *   카카오톡 공유 버튼.
    *   동적 썸네일 (OG Image): "[이름]님이 보낸 봉투가 도착했습니다."

### 3.2. 받는 사람 (읽기)
1.  **도착**:
    *   링크 접속: `domain.com/view/[id]#[Key]`.
    *   화면 중앙에 봉투가 부유하는 애니메이션.
2.  **언박싱**:
    *   빨간 뜯는 선을 슬라이드/스와이프.
    *   햅틱 피드백 + 사운드.
    *   봉투가 찢어지고 편지지가 올라오는 애니메이션.
3.  **복호화 및 읽기**:
    *   **클라이언트**: URL 경로에서 `[id]` 추출.
    *   **클라이언트**: `[id]`로 Supabase에서 암호문 가져오기.
    *   **클라이언트**: URL 해시(`#[Key]`)에서 `[Key]` 추출.
    *   **클라이언트**: `[Key]`로 암호문 복호화 및 내용 표시.
4.  **액션**:
    *   **답장하기**: "나도 답장 쓰기" (바이럴 루프).
    *   **소장하기**: "실물 엽서로 소장하기" (스마트스토어 링크).

## 4. 기술 스택
*   **프레임워크**: Next.js (App Router).
*   **스타일링**: Tailwind CSS.
*   **애니메이션**: Framer Motion.
*   **데이터베이스**: Supabase (PostgreSQL) - 암호화된 데이터만 저장.
*   **보안**: crypto-js (클라이언트 측 AES 암호화).
*   **배포**: Vercel.

## 5. 개발 로드맵
1.  **설정**: Supabase 프로젝트 및 테이블(`letters`) 구성.
2.  **로직**: `encrypt(text, key)` 및 `decrypt(ciphertext, key)` 유틸리티 구현.
3.  **API**: 암호화된 데이터를 저장/조회하는 Next.js Server Actions 또는 API 라우트 구현.
4.  **UI/UX**:
    *   작성 페이지 업데이트 (새로운 흐름 적용).
    *   조회 페이지 업데이트 (ID 조회 및 해시 복호화 적용).
5.  **검증**: 전체 흐름(작성 -> 링크 -> 읽기) 테스트 및 Key가 클라이언트를 벗어나지 않는지 확인.
